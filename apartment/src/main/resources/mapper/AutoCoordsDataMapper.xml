<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.dw.Mapper.AutoCoordsDataMapper">
    
    <resultMap type="AptCoordsDto" id="newAptCoordsDto">
  	<!-- 1:1로 DTO의 멤버변수를 매핑-->
  	<result column="sigungu" property="SIGUNGU"/>
  	<result column="bungi" property="BUNGI"/>
  	<result column="apartmentname" property="APARTMENTNAME"/>
  	<result column="roadname" property="ROADNAME"/>
  	<result column="lat" property="LAT"/>
  	<result column="lng" property="LNG"/>
	</resultMap>   
    
    <resultMap type="AptTransactionDto" id="newAptTransactionDto">
  	<!-- 1:1로 DTO의 멤버변수를 매핑-->
  	<result column="SIGUNGU" property="SIGUNGU"/>
  	<result column="BUNGI" property="BUNGI"/>
  	<result column="BONBUN" property="BONBUN"/>
  	<result column="BUBUN" property="BUBUN"/>
  	<result column="APARTMENTNAME" property="APARTMENTNAME"/>
  	<result column="AREAFOREXCLUSIVEUSE" property="AREAFOREXCLUSIVEUSE"/>
  	<result column="DEALYEARMONTH" property="DEALYEARMONTH"/>
  	<result column="DEALDAY" property="DEALDAY"/>
  	<result column="DEALAMOUNT" property="DEALAMOUNT"/>
  	<result column="APARTMENTDONG" property="APARTMENTDONG"/>
  	<result column="FLOOR" property="FLOOR"/>
  	<result column="BUYERGBN" property="BUYERGBN"/>
  	<result column="SELLERGBN" property="SELLERGBN"/>
  	<result column="BUILDYEAR" property="BUILDYEAR"/>
  	<result column="ROADNAME" property="ROADNAME"/>
  	<result column="CANCLEDEALDAY" property="CANCLEDEALDAY"/>
  	<result column="REQGBN" property="REQGBN"/>
  	<result column="RDEALERLAWDNM" property="RDEALERLAWDNM"/>
  	<result column="REGISTRATIONDATE" property="REGISTRATIONDATE"/>
  	<result column="SGGCD" property="SGGCD"/>
	</resultMap>   
    
    <select id="getList">
    
    select SIGUNGU,BUNGI,ROADNAME,APARTMENTNAME from ${tableName} group by SIGUNGU,BUNGI,ROADNAME,APARTMENTNAME order by SIGUNGU DESC
    
    </select>
    
    <select id = "getCoords" parameterType="AptCoordsDto">
    
    select * from COORDINATES where SIGUNGU = #{SIGUNGU} and BUNGI = #{BUNGI} and ROADNAME = #{ROADNAME} and APARTMENTNAME = #{APARTMENTNAME}
   
    </select>
    
    <insert id="insertCoords" parameterType="AptCoordsDto">
    
    insert into COORDINATES (SIGUNGU, BUNGI, LAT,LNG,ROADNAME,APARTMENTNAME) values (#{SIGUNGU},#{BUNGI},#{LAT},#{LNG},#{ROADNAME},#{APARTMENTNAME})
    
    </insert>
    
    <select id="getParentRegionAptCoordsDtoList" parameterType="ParentRegionName">
    select SIGUNGU,BUNGI,ROADNAME,APARTMENTNAME from 
    <choose>
    
    <when test="engParentName == 'SEOUL'">SEOUL</when>
    <when test="engParentName == 'BUSAN'">BUSAN</when>    
    <when test="engParentName == 'DAEGU'">DAEGU</when>
    <when test="engParentName == 'INCHEON'">INCHEON</when>
    <when test="engParentName == 'GWANGJU'">GWANGJU</when>
    <when test="engParentName == 'DAEJEON'">DAEJEON</when>
    <when test="engParentName == 'ULSAN'">ULSAN</when>
    <when test="engParentName == 'SEJONG'">SEJONG</when>
    <when test="engParentName == 'GYEONGGIDO'">GYEONGGIDO</when>
    <when test="engParentName == 'GANGWONDO'">GANGWONDO</when>
    <when test="engParentName == 'CHUNGCHEONGBUKDO'">CHUNGCHEONGBUKDO</when>
    <when test="engParentName == 'CHUNGCHEONGNAMDO'">CHUNGCHEONGNAMDO</when>
    <when test="engParentName == 'JEOLLABUKDO'">JEOLLABUKDO</when>
    <when test="engParentName == 'GYEONGSANGBUKDO'">GYEONGSANGBUKDO</when>
    <when test="engParentName == 'GYEONGSANGNAMDO'">GYEONGSANGNAMDO</when>    
    <when test="engParentName == 'JEJU'">JEJU</when>

    <otherwise>
    ${engParentName}
    </otherwise> 
    </choose>
    group by SIGUNGU,BUNGI,ROADNAME,APARTMENTNAME order by SIGUNGU DESC
    </select>
    
    <select id = "getCoordsDto" parameterType="AptCoordsDto">
    
    select * from COORDINATES where SIGUNGU = #{SIGUNGU} and BUNGI = #{BUNGI} and ROADNAME = #{ROADNAME} and APARTMENTNAME = #{APARTMENTNAME}
   
    </select>
    
</mapper>	